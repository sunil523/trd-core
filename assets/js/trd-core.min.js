!function r(s,d,l){function a(t,e){if(!d[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var i=d[t]={exports:{}};s[t][0].call(i.exports,function(e){return a(s[t][1][e]||e)},i,i.exports,r,s,d,l)}return d[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)a(l[e]);return a}({1:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var o;Object.assign({messageTimeout:5e3,fixedEmbedTimer:3e3},e);(o={init:function(){var e=setInterval(function(){"object"===i(window.tp)&&(o.piano(),clearInterval(e))},500),t=setInterval(function(){"function"==typeof window.jQuery&&(o.trd_nav(),clearInterval(t))},500)},piano:function(){window.tp.push(["init",function(){null!=$(".trd-nav-account-login, .trd-nav-account-logout")&&(window.tp.pianoId.isUserValid()?($(".trd-header.trd-nav").addClass("trd-nav-loggedin"),$(".trd-nav-account-login").addClass("hide"),$(".trd-nav-account-logout").removeClass("hide"),$('.trd-nav-account-logout a[href*="/#logout"]').on("click",function(e){e.preventDefault(),window.tp.pianoId.logout(),window.location.reload()})):($(".trd-nav-account-logout").addClass("hide"),$(".trd-nav-account-login").removeClass("hide"),$('.trd-nav-account-login a[href*="/#login"]').on("click",function(e){return e.preventDefault(),window.tp.pianoId.show({screen:"login",displayMode:"modal",loggedIn:function(){window.location.reload()}}),!1})))}])},trd_nav:function(){$(".trd-nav-menu-btn").on("click",function(){$(this).hasClass("close")?($(".trd-nav-secondary").removeClass("show"),$("html,body").removeClass("overflow-off")):($(".trd-nav-secondary").addClass("show"),$("html,body").addClass("overflow-off"))}),$(".trd-nav-search-btn").on("click",function(){$(".trd-nav-search").toggleClass("show")}),$(".trd-nav-mid-left").on("click",function(){var e=o.nav_scroll_left();$(".trd-nav-regions").animate({scrollLeft:e-100},1e3)}),$(".trd-nav-mid-right").on("click",function(){var e=o.nav_scroll_left();$(".trd-nav-regions").animate({scrollLeft:e+100},1e3)}),$(".trd-nav-regions").on("scroll",function(){o.nav_scroll_left()})},nav_scroll_left:function(){var e=$(".trd-nav-regions").scrollLeft(),t=o.get_total_nav_item_width(),n=window.nav_regions_width;return 0<e?$(".trd-nav-mid").addClass("show-left"):$(".trd-nav-mid").removeClass("show-left"),t<=n+e?$(".trd-nav-mid").removeClass("show-right"):$(".trd-nav-mid").addClass("show-right"),e},get_total_nav_item_width:function(){return window.nav_item_width||(window.nav_regions_width=$(".trd-nav-regions").width(),window.nav_item_width=0,$(".trd-nav-regions .trd-nav-item").each(function(){window.nav_item_width+=$(this).width()})),window.nav_item_width}}).init()}},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var o,i,t,r=Object.assign({messageTimeout:5e3,fixedEmbedTimer:3e3},e);o={$widgetSlide:$(".newsletter-slide"),$widgetSlideClose:$(".newsletter-slide-close-btn"),$form:$(".newsletter-form"),$close:$("#newsletter-form-close-btn"),$btn:$(".newsletter-form").find("button[type=submit]"),$subAll:$("#newsletter_subscribe_all"),$widget:$("form[name=mc-embedded-subscribe-form], .newsletter .widget-embed-form"),$navlink:$('.trd-nav-link[href*="/newsletter/"]'),$embed_close:$(".widget-embed-close"),$fixedWidget:$(".newsletter.widget-embed.widget-fixed")},i={init:function(){var e=setInterval(function(){window.jQuery&&(i.eventListener(),clearInterval(e))},500)},eventListener:function(){o.$form.on("submit",t.save),o.$navlink.on("click",t.loadWidgetForm),o.$embed_close.on("click",t.closeFixedWidget),o.$subAll.on("change",t.subscribeAll),o.$widgetSlideClose.on("click",t.close)},registerEls:function(){o.$widgetSlide=$(".newsletter-slide"),o.$widgetSlideClose=$(".newsletter-slide-close-btn"),o.$form=$(".newsletter-form"),o.$close=$("#newsletter-form-close-btn"),o.$btn=$(".newsletter-form").find("button[type=submit]"),o.$subAll=$("#newsletter_subscribe_all"),i.eventListener()},fixedEmbed:function(){o.$fixedWidget.length&&setTimeout(function(){t.showFixedWidget()},r.fixedEmbedTimer)},showWidgetForm:function(e){o.$subAll.prop("checked",!0).trigger("change"),$("header.trd-header, .admin-bar").addClass("zdown"),$("html,body").addClass("overflow-off"),o.$widgetSlide.addClass("show"),o.$form.find("input[type=email]").val(e),setTimeout(function(){o.$form.on("submit",t.save),o.$form.on("reset",t.close)},1e3)}},t={save:function(e){o.$btn=o.$form.find("button[type=submit]");var n={action:"newsletter_subscribe",security:trd_ajax.security,data:{}};return o.$form.find("input").each(function(){var e=$(this).val(),t=$(this).attr("name");"checkbox"===$(this).attr("type")?"subscribe_all"!==t&&(n.data[t]=$(this).is(":checked")):""!==$.trim(e)&&(n.data[t]=e)}),o.$btn.text("Subscribing...").attr("disabled","disabled"),jQuery.post(trd_ajax.url,n,function(e){o.$btn.text("Subscribe").removeAttr("disabled"),$(".newsletter-form-button").hide(),e.success?$(".newsletter-form-success").show():$(".newsletter-form-error").show(),setTimeout(function(){$(".newsletter-form-success,.newsletter-form-error").hide(),$(".newsletter-form-button").show()},r.messageTimeout)}),!1},loadWidgetForm:function(e){e.preventDefault();var t={action:"newsletter_widget_form",security:trd_ajax.security},n=$(this).find("input[type=email], input[name=EMAIL]").val();return $(".newsletter-form.page").length?($(".newsletter-form.page").find("input[type=email]").val(n).focus(),$("html,body").animate({scrollTop:0},500)):o.$widgetSlide.length?i.showWidgetForm(n):jQuery.post(trd_ajax.url,t,function(e){e&&($("body").append(e),i.showWidgetForm(n),i.registerEls())}),!1},close:function(e){o.$widgetSlide.removeClass("show"),o.$subAll.prop("checked",!0).trigger("change"),$("html,body").removeClass("overflow-off"),setTimeout(function(){$("header.trd-header, .admin-bar").removeClass("zdown")},500)},closeFixedWidget:function(e){$(".newsletter.widget-embed.widget-fixed").removeClass("show")},showFixedWidget:function(e){$(".newsletter.widget-embed.widget-fixed").addClass("show")},subscribeAll:function(e){var t=$(this).prop("checked");o.$form.find(".checkboxes input[type=checkbox]").prop("checked",t)}},i.init()}},{}],3:[function(e,t,n){"use strict";var o=r(e("./_navigation")),i=r(e("./_newsletter"));function r(e){return e&&e.__esModule?e:{default:e}}console.info("TRD Core Loaded"),(0,o.default)(),(0,i.default)()},{"./_navigation":1,"./_newsletter":2}]},{},[3]);
//# sourceMappingURL=trd-core.min.js.map
