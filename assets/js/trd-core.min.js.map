{"version":3,"sources":["trd-core.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","value","options","fn","handlers","assign","messageTimeout","fixedEmbedTimer","init","piano_timer","setInterval","window","tp","piano","clearInterval","nav_timer","jQuery","trd_nav","eventListener","$","on","navFixed","push","pianoId","isUserValid","addClass","removeClass","event","preventDefault","logout","location","reload","show","screen","displayMode","loggedIn","this","hasClass","toggleClass","scroll","nav_scroll_left","animate","scrollLeft","lscroll","rscroll","get_total_nav_item_width","width","nav_regions_width","nav_item_width","each","scrollTop","2","els","$slideForm","$slideFormClose","$form","$close","$btn","find","$widget","$navlink","$embed_close","$fixedWidget","$subscribeSubmit","timer","registerEls","save","loadSlideForm","fixedWidgetClose","close","showSlideForm","email","document","val","setTimeout","trackEvent","category","label","dataObject","dataLayer","data","action","security","trd_ajax","name","attr","is","trim","text","post","url","response","removeAttr","hide","success","widget","prop","focus","append","type","showFixedWidget","3","_navigation","_interopRequireDefault","_newsletter","__esModule","default","console","info","./_navigation","./_newsletter"],"mappings":"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","file":"trd-core.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _default(options) {\n  var defaults = {\n    messageTimeout: 5000,\n    // 5 seconds\n    fixedEmbedTimer: 3000 // 3 seconds\n\n  };\n  var els;\n  var fn;\n  var handlers;\n  var o = Object.assign(defaults, options);\n  fn = {\n    init: function init() {\n      var piano_timer = setInterval(function () {\n        if (_typeof(window.tp) === 'object') {\n          fn.piano();\n          clearInterval(piano_timer);\n        }\n      }, 500);\n      var nav_timer = setInterval(function () {\n        if (typeof window.jQuery === 'function') {\n          fn.trd_nav();\n          clearInterval(nav_timer);\n        }\n      }, 500);\n      fn.eventListener();\n    },\n    eventListener: function eventListener() {\n      $(window).on('scroll', handlers.navFixed);\n    },\n    piano: function piano() {\n      window.tp.push([\"init\", function () {\n        if ($('.trd-nav-account-login, .trd-nav-account-logout') != null) {\n          if (window.tp.pianoId.isUserValid()) {\n            $('.trd-header.trd-nav').addClass('trd-nav-loggedin');\n            $('.trd-nav-account-login').addClass('hide');\n            $('.trd-nav-account-logout').removeClass('hide');\n            $('.trd-nav-account-logout a[href*=\"/#logout\"]').on('click', function (event) {\n              event.preventDefault();\n              window.tp.pianoId.logout();\n              window.location.reload();\n            });\n          } else {\n            $('.trd-nav-account-logout').addClass('hide');\n            $('.trd-nav-account-login').removeClass('hide');\n            $('.trd-nav-account-login a[href*=\"/#login\"]').on('click', function (event) {\n              event.preventDefault();\n              window.tp.pianoId.show({\n                screen: 'login',\n                displayMode: 'modal',\n                loggedIn: function loggedIn() {\n                  window.location.reload();\n                }\n              });\n              return false;\n            });\n          }\n        }\n      }]);\n    },\n    trd_nav: function trd_nav() {\n      $('.trd-nav-menu-btn').on('click', function () {\n        if ($(this).hasClass('close')) {\n          $('.trd-nav-secondary').removeClass('show');\n          $('html,body').removeClass('overflow-off');\n        } else {\n          $('.trd-nav-secondary').addClass('show');\n          $('html,body').addClass('overflow-off');\n        }\n      });\n      $('.trd-nav-search-btn').on('click', function () {\n        $('.trd-nav-search').toggleClass('show');\n      });\n      $('.trd-nav-mid-left').on('click', function () {\n        var scroll = fn.nav_scroll_left();\n        $('.trd-nav-regions').animate({\n          scrollLeft: scroll - 100\n        }, 1000);\n      });\n      $('.trd-nav-mid-right').on('click', function () {\n        var scroll = fn.nav_scroll_left();\n        $('.trd-nav-regions').animate({\n          scrollLeft: scroll + 100\n        }, 1000);\n      });\n      $('.trd-nav-regions').on('scroll', function () {\n        fn.nav_scroll_left();\n      });\n    },\n    nav_scroll_left: function nav_scroll_left() {\n      var lscroll = $('.trd-nav-regions').scrollLeft();\n      var rscroll = fn.get_total_nav_item_width();\n      var width = window.nav_regions_width;\n\n      if (lscroll > 0) {\n        $('.trd-nav-mid').addClass('show-left');\n      } else {\n        $('.trd-nav-mid').removeClass('show-left');\n      }\n\n      if (rscroll <= width + lscroll) {\n        $('.trd-nav-mid').removeClass('show-right');\n      } else {\n        $('.trd-nav-mid').addClass('show-right');\n      }\n\n      return lscroll;\n    },\n    get_total_nav_item_width: function get_total_nav_item_width() {\n      if (!window.nav_item_width) {\n        window.nav_regions_width = $('.trd-nav-regions').width();\n        window.nav_item_width = 0;\n        $('.trd-nav-regions .trd-nav-item').each(function () {\n          window.nav_item_width += $(this).width();\n        });\n      }\n\n      return window.nav_item_width;\n    }\n  };\n  handlers = {\n    navFixed: function navFixed(e) {\n      var fixedNavTop = 74;\n      var scrollTop = $(window).scrollTop();\n\n      if (scrollTop > fixedNavTop) {\n        $('.trd-nav').addClass('is-fixed');\n      } else {\n        $('.trd-nav').removeClass('is-fixed');\n      }\n    }\n  };\n  fn.init();\n}\n\n;\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\nfunction _default(options) {\n  var defaults = {\n    messageTimeout: 5000,\n    // 5 seconds\n    fixedEmbedTimer: 3000 // 3 seconds\n\n  };\n  var els;\n  var fn;\n  var handlers;\n  var o = Object.assign(defaults, options);\n  els = {\n    $slideForm: $('.newsletter-slide'),\n    $slideFormClose: $('.newsletter-slide-close-btn'),\n    $form: $('.newsletter-form'),\n    $close: $('#newsletter-form-close-btn'),\n    $btn: $('.newsletter-form').find('button[type=submit]'),\n    $widget: $('form[name=mc-embedded-subscribe-form], .newsletter .widget-embed-form'),\n    $navlink: $('.trd-nav-link[href*=\"/newsletter/\"]'),\n    $embed_close: $('.widget-embed-close'),\n    $fixedWidget: $('.newsletter.widget-embed.widget-fixed'),\n    $subscribeSubmit: false\n  };\n  fn = {\n    init: function init() {\n      var timer = setInterval(function () {\n        if (window.jQuery) {\n          fn.eventListener();\n          clearInterval(timer);\n        }\n      }, 500);\n    },\n    registerEls: function registerEls() {\n      els.$slideForm = $('.newsletter-slide');\n      els.$slideFormClose = $('.newsletter-slide-close-btn');\n      els.$form = $('.newsletter-form');\n      els.$close = $('#newsletter-form-close-btn');\n      els.$btn = $('.newsletter-form').find('button[type=submit]');\n      fn.eventListener();\n    },\n    eventListener: function eventListener() {\n      els.$form.on('submit', handlers.save);\n      els.$widget.on('submit', handlers.loadSlideForm);\n      els.$navlink.on('click', handlers.loadSlideForm);\n      els.$embed_close.on('click', handlers.fixedWidgetClose);\n      els.$slideFormClose.on('click', handlers.close);\n    },\n    showSlideForm: function showSlideForm(email) {\n      var width = $(document).width();\n      $('header.trd-header, .admin-bar').addClass('zdown');\n      if (width > 782) $('html,body').addClass('move-over');\n      if (width < 782) $('html,body').addClass('overflow-off');\n      els.$slideForm.addClass('show');\n      els.$form.find('input[type=email]').val(email);\n      setTimeout(function () {\n        els.$form.on('submit', handlers.save);\n        els.$form.on('reset', handlers.close);\n      }, 1000);\n    },\n    trackEvent: function trackEvent(event, category, label) {\n      var dataObject = {\n        'event': event,\n        'category': category,\n        'label': label\n      };\n\n      if (typeof dataLayer != 'undefined') {\n        dataLayer.push(dataObject);\n      }\n    }\n  };\n  handlers = {\n    save: function save(e) {\n      if (els.$subscribeSubmit) return false;\n      els.$subscribeSubmit = true;\n      els.$btn = els.$form.find('button[type=submit]');\n      var data = {\n        'action': 'newsletter_subscribe',\n        'security': trd_ajax.security,\n        'data': {}\n      };\n      els.$form.find('input').each(function () {\n        var val = $(this).val();\n        var name = $(this).attr('name');\n        var type = $(this).attr('type');\n\n        if ('checkbox' === type) {\n          if (name !== 'subscribe_all') {\n            data.data[name] = $(this).is(\":checked\");\n          }\n        } else if ($.trim(val) !== '') {\n          data.data[name] = val;\n        }\n      });\n      fn.trackEvent('subscribe', 'newsletter_signup_form', data.data['place']);\n      els.$btn.text('Subscribing...').attr('disabled', 'disabled');\n      jQuery.post(trd_ajax.url, data, function (response) {\n        els.$subscribeSubmit = false;\n        els.$btn.text('Subscribe').removeAttr('disabled');\n        $('.newsletter-form-button').hide();\n\n        if (response.success) {\n          $('.newsletter-form-success').show();\n          fn.trackEvent('subscribe', 'newsletter_signup_form', 'success');\n        } else {\n          $('.newsletter-form-error').show();\n          fn.trackEvent('subscribe', 'newsletter_signup_form', 'failed');\n        }\n\n        setTimeout(function () {\n          $('.newsletter-form-success,.newsletter-form-error').hide();\n          $('.newsletter-form-button').show();\n        }, o.messageTimeout);\n      });\n      return false;\n    },\n    loadSlideForm: function loadSlideForm(e) {\n      e.preventDefault();\n      var name = '';\n      var email = '';\n      var widget = $(this);\n      var data = {\n        'action': 'newsletter_slide_form',\n        'security': trd_ajax.security\n      };\n\n      if (widget.prop('tagName') === 'FORM') {\n        name = widget.attr('name');\n        email = widget.find('input[type=email], input[name=EMAIL]').val();\n      } else if (widget.prop('tagName') === 'A') {\n        name = widget.attr('class');\n      }\n\n      if ($('.newsletter-form.page').length) {\n        $('.newsletter-form.page').find('input[type=email]').val(email).focus();\n        $('html,body').animate({\n          scrollTop: 0\n        }, 500);\n      } else if (els.$slideForm.length) {\n        fn.showSlideForm(email);\n      } else {\n        jQuery.post(trd_ajax.url, data, function (response) {\n          if (response) {\n            $('body').append(response);\n            fn.showSlideForm(email);\n            fn.registerEls();\n          }\n        });\n      }\n\n      fn.trackEvent(e.type, 'newsletter_sinup_open', name);\n      return false;\n    },\n    close: function close(e) {\n      handlers.fixedWidgetClose(e);\n      els.$slideForm.removeClass('show');\n      $('body').removeClass('move-over');\n      $('html,body').removeClass('overflow-off');\n      setTimeout(function () {\n        $('header.trd-header, .admin-bar').removeClass('zdown');\n      }, 500);\n    },\n    fixedWidgetClose: function fixedWidgetClose(e) {\n      $('.newsletter.widget-embed.widget-fixed').removeClass('show');\n    },\n    showFixedWidget: function showFixedWidget(e) {\n      $('.newsletter.widget-embed.widget-fixed').addClass('show');\n    }\n  };\n  fn.init();\n}\n\n;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _navigation = _interopRequireDefault(require(\"./_navigation\"));\n\nvar _newsletter = _interopRequireDefault(require(\"./_newsletter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nconsole.info('TRD Core Loaded');\n(0, _navigation[\"default\"])();\n(0, _newsletter[\"default\"])();\n\n},{\"./_navigation\":1,\"./_newsletter\":2}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvX25hdmlnYXRpb24uanMiLCJzcmMvanMvX25ld3NsZXR0ZXIuanMiLCJzcmMvanMvdHJkLWNvcmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7QUNBZSxrQkFBVyxPQUFYLEVBQW9CO0FBRWpDLE1BQU0sUUFBUSxHQUFHO0FBQ2YsSUFBQSxjQUFjLEVBQUcsSUFERjtBQUNRO0FBQ3ZCLElBQUEsZUFBZSxFQUFFLElBRkYsQ0FFUTs7QUFGUixHQUFqQjtBQUtBLE1BQUksR0FBSjtBQUNBLE1BQUksRUFBSjtBQUNBLE1BQUksUUFBSjtBQUNBLE1BQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFQLENBQWUsUUFBZixFQUF5QixPQUF6QixDQUFSO0FBRUEsRUFBQSxFQUFFLEdBQUc7QUFDSCxJQUFBLElBREcsa0JBQ0k7QUFDTCxVQUFJLFdBQVcsR0FBRyxXQUFXLENBQUMsWUFBTTtBQUNsQyxZQUFLLFFBQU8sTUFBTSxDQUFDLEVBQWQsTUFBcUIsUUFBMUIsRUFBb0M7QUFDbEMsVUFBQSxFQUFFLENBQUMsS0FBSDtBQUNBLFVBQUEsYUFBYSxDQUFFLFdBQUYsQ0FBYjtBQUNEO0FBQ0YsT0FMNEIsRUFLMUIsR0FMMEIsQ0FBN0I7QUFPQSxVQUFJLFNBQVMsR0FBRyxXQUFXLENBQUMsWUFBTTtBQUNoQyxZQUFLLE9BQU8sTUFBTSxDQUFDLE1BQWQsS0FBeUIsVUFBOUIsRUFBMEM7QUFDeEMsVUFBQSxFQUFFLENBQUMsT0FBSDtBQUNBLFVBQUEsYUFBYSxDQUFFLFNBQUYsQ0FBYjtBQUNEO0FBQ0YsT0FMMEIsRUFLeEIsR0FMd0IsQ0FBM0I7QUFNQSxNQUFBLEVBQUUsQ0FBQyxhQUFIO0FBQ0QsS0FoQkU7QUFrQkgsSUFBQSxhQWxCRywyQkFrQmM7QUFDZixNQUFBLENBQUMsQ0FBQyxNQUFELENBQUQsQ0FBVSxFQUFWLENBQWEsUUFBYixFQUF1QixR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Q0FBVjtBQUdELEtBdEZRO0FBd0ZULElBQUEsZ0JBeEZTLDRCQXdGVSxDQXhGVixFQXdGYztBQUNyQixNQUFBLENBQUMsQ0FBQyx1Q0FBRCxDQUFELENBQTJDLFdBQTNDLENBQXVELE1BQXZEO0FBQ0QsS0ExRlE7QUE0RlQsSUFBQSxlQTVGUywyQkE0RlMsQ0E1RlQsRUE0RmE7QUFDcEIsTUFBQSxDQUFDLENBQUMsdUNBQUQsQ0FBRCxDQUEyQyxRQUEzQyxDQUFvRCxNQUFwRDtBQUNEO0FBOUZRLEdBQVg7QUFrR0EsRUFBQSxFQUFFLENBQUMsSUFBSDtBQUNEOztBQUFBOzs7QUNoTEQ7O0FBRUE7O0FBQ0E7Ozs7QUFGQSxPQUFPLENBQUMsSUFBUixDQUFhLGlCQUFiO0FBR0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICggb3B0aW9ucyApe1xuXG4gIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgIG1lc3NhZ2VUaW1lb3V0OiAgNTAwMCwgLy8gNSBzZWNvbmRzXG4gICAgZml4ZWRFbWJlZFRpbWVyOiAzMDAwICAvLyAzIHNlY29uZHNcbiAgfTtcblxuICBsZXQgZWxzO1xuICBsZXQgZm47XG4gIGxldCBoYW5kbGVycztcbiAgbGV0IG8gPSBPYmplY3QuYXNzaWduKCBkZWZhdWx0cywgb3B0aW9ucyApO1xuXG4gIGZuID0ge1xuICAgIGluaXQoKSB7XG4gICAgICBsZXQgcGlhbm9fdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmICggdHlwZW9mIHdpbmRvdy50cCA9PT0gJ29iamVjdCcgKXtcbiAgICAgICAgICBmbi5waWFubygpO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoIHBpYW5vX3RpbWVyICk7XG4gICAgICAgIH1cbiAgICAgIH0sIDUwMCk7XG4gICAgICBcbiAgICAgIGxldCBuYXZfdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmICggdHlwZW9mIHdpbmRvdy5qUXVlcnkgPT09ICdmdW5jdGlvbicgKXtcbiAgICAgICAgICBmbi50cmRfbmF2KCk7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCggbmF2X3RpbWVyICk7XG4gICAgICAgIH1cbiAgICAgIH0sIDUwMCk7XG4gICAgICBmbi5ldmVudExpc3RlbmVyKCk7XG4gICAgfSxcblxuICAgIGV2ZW50TGlzdGVuZXIgKCkge1xuICAgICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBoYW5kbGVycy5uYXZGaXhlZCApO1xuICAgIH0sXG5cbiAgICBcbiAgICBwaWFubygpIHtcbiAgICAgIHdpbmRvdy50cC5wdXNoKFtcImluaXRcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgaWYoICQoJy50cmQtbmF2LWFjY291bnQtbG9naW4sIC50cmQtbmF2LWFjY291bnQtbG9nb3V0JykgIT0gbnVsbCApIHtcbiAgICAgICAgICBpZiggd2luZG93LnRwLnBpYW5vSWQuaXNVc2VyVmFsaWQoKSApIHtcbiAgICAgICAgICAgICQoJy50cmQtaGVhZGVyLnRyZC1uYXYnKS5hZGRDbGFzcygndHJkLW5hdi1sb2dnZWRpbicpO1xuICAgICAgICAgICAgJCgnLnRyZC1uYXYtYWNjb3VudC1sb2dpbicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAkKCcudHJkLW5hdi1hY2NvdW50LWxvZ291dCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAkKCcudHJkLW5hdi1hY2NvdW50LWxvZ291dCBhW2hyZWYqPVwiLyNsb2dvdXRcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbiggZXZlbnQgKXtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgd2luZG93LnRwLnBpYW5vSWQubG9nb3V0KCk7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcudHJkLW5hdi1hY2NvdW50LWxvZ291dCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAkKCcudHJkLW5hdi1hY2NvdW50LWxvZ2luJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICQoJy50cmQtbmF2LWFjY291bnQtbG9naW4gYVtocmVmKj1cIi8jbG9naW5cIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbiggZXZlbnQgKXtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgd2luZG93LnRwLnBpYW5vSWQuc2hvdyh7XG4gICAgICAgICAgICAgICAgc2NyZWVuOiAgICAgICdsb2dpbicsXG4gICAgICAgICAgICAgICAgZGlzcGxheU1vZGU6ICdtb2RhbCcsXG4gICAgICAgICAgICAgICAgbG9nZ2VkSW46ICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1dKTtcbiAgICB9LFxuXG4gICAgdHJkX25hdigpIHtcbiAgICAgICQoJy50cmQtbmF2LW1lbnUtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKCQodGhpcykuaGFzQ2xhc3MoJ2Nsb3NlJykpe1xuICAgICAgICAgICQoJy50cmQtbmF2LXNlY29uZGFyeScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICAgICAgICAgJCgnaHRtbCxib2R5JykucmVtb3ZlQ2xhc3MoJ292ZXJmbG93LW9mZicpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAkKCcudHJkLW5hdi1zZWNvbmRhcnknKS5hZGRDbGFzcygnc2hvdycpO1xuICAgICAgICAgICQoJ2h0bWwsYm9keScpLmFkZENsYXNzKCdvdmVyZmxvdy1vZmYnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAkKCcudHJkLW5hdi1zZWFyY2gtYnRuJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAkKCcudHJkLW5hdi1zZWFyY2gnKS50b2dnbGVDbGFzcygnc2hvdycpO1xuICAgICAgfSk7XG4gICAgICAkKCcudHJkLW5hdi1taWQtbGVmdCcpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgbGV0IHNjcm9sbCA9IGZuLm5hdl9zY3JvbGxfbGVmdCgpO1xuICAgICAgICAkKCcudHJkLW5hdi1yZWdpb25zJykuYW5pbWF0ZSh7XG4gICAgICAgICAgc2Nyb2xsTGVmdDogc2Nyb2xsIC0gMTAwXG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfSk7XG4gICAgICAkKCcudHJkLW5hdi1taWQtcmlnaHQnKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGxldCBzY3JvbGwgPSBmbi5uYXZfc2Nyb2xsX2xlZnQoKTtcbiAgICAgICAgJCgnLnRyZC1uYXYtcmVnaW9ucycpLmFuaW1hdGUoe1xuICAgICAgICAgIHNjcm9sbExlZnQ6IHNjcm9sbCArIDEwMFxuICAgICAgICB9LCAxMDAwKTtcbiAgICAgIH0pO1xuICAgICAgJCgnLnRyZC1uYXYtcmVnaW9ucycpLm9uKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgIGZuLm5hdl9zY3JvbGxfbGVmdCgpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIG5hdl9zY3JvbGxfbGVmdCgpe1xuICAgICAgbGV0IGxzY3JvbGwgPSAkKCcudHJkLW5hdi1yZWdpb25zJykuc2Nyb2xsTGVmdCgpO1xuICAgICAgbGV0IHJzY3JvbGwgPSBmbi5nZXRfdG90YWxfbmF2X2l0ZW1fd2lkdGgoKTtcbiAgICAgIGxldCB3aWR0aCAgID0gd2luZG93Lm5hdl9yZWdpb25zX3dpZHRoO1xuICAgICAgaWYoIGxzY3JvbGwgPiAwKXtcbiAgICAgICAgJCgnLnRyZC1uYXYtbWlkJykuYWRkQ2xhc3MoJ3Nob3ctbGVmdCcpO1xuICAgICAgfWVsc2V7XG4gICAgICAgICQoJy50cmQtbmF2LW1pZCcpLnJlbW92ZUNsYXNzKCdzaG93LWxlZnQnKTtcbiAgICAgIH1cbiAgICAgIGlmKCByc2Nyb2xsIDw9ICh3aWR0aCArIGxzY3JvbGwpICl7XG4gICAgICAgICQoJy50cmQtbmF2LW1pZCcpLnJlbW92ZUNsYXNzKCdzaG93LXJpZ2h0Jyk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgJCgnLnRyZC1uYXYtbWlkJykuYWRkQ2xhc3MoJ3Nob3ctcmlnaHQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsc2Nyb2xsO1xuICAgIH0sXG5cbiAgICBnZXRfdG90YWxfbmF2X2l0ZW1fd2lkdGgoKXtcbiAgICAgIGlmKCF3aW5kb3cubmF2X2l0ZW1fd2lkdGgpe1xuICAgICAgICB3aW5kb3cubmF2X3JlZ2lvbnNfd2lkdGggPSAkKCcudHJkLW5hdi1yZWdpb25zJykud2lkdGgoKTtcbiAgICAgICAgd2luZG93Lm5hdl9pdGVtX3dpZHRoID0gMDtcbiAgICAgICAgJCgnLnRyZC1uYXYtcmVnaW9ucyAudHJkLW5hdi1pdGVtJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICB3aW5kb3cubmF2X2l0ZW1fd2lkdGggKz0gJCh0aGlzKS53aWR0aCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3aW5kb3cubmF2X2l0ZW1fd2lkdGg7XG4gICAgfVxuICB9O1xuXG4gIGhhbmRsZXJzID0ge1xuICAgIG5hdkZpeGVkICggZSApIHtcbiAgICAgIGxldCBmaXhlZE5hdlRvcCA9IDc0O1xuICAgICAgbGV0IHNjcm9sbFRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgIGlmKCBzY3JvbGxUb3AgPiBmaXhlZE5hdlRvcCApIHtcbiAgICAgICAgJCgnLnRyZC1uYXYnKS5hZGRDbGFzcygnaXMtZml4ZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoJy50cmQtbmF2JykucmVtb3ZlQ2xhc3MoJ2lzLWZpeGVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGZuLmluaXQoKTtcbn07IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCBvcHRpb25zICl7XG5cbiAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgbWVzc2FnZVRpbWVvdXQ6ICA1MDAwLCAvLyA1IHNlY29uZHNcbiAgICBmaXhlZEVtYmVkVGltZXI6IDMwMDAgIC8vIDMgc2Vjb25kc1xuICB9O1xuXG4gIGxldCBlbHM7XG4gIGxldCBmbjtcbiAgbGV0IGhhbmRsZXJzO1xuICBsZXQgbyA9IE9iamVjdC5hc3NpZ24oIGRlZmF1bHRzLCBvcHRpb25zICk7XG5cbiAgZWxzID0ge1xuICAgICRzbGlkZUZvcm06ICQoJy5uZXdzbGV0dGVyLXNsaWRlJyksXG4gICAgJHNsaWRlRm9ybUNsb3NlOiAkKCcubmV3c2xldHRlci1zbGlkZS1jbG9zZS1idG4nKSxcbiAgICAkZm9ybTogICAgICAgICQoJy5uZXdzbGV0dGVyLWZvcm0nKSxcbiAgICAkY2xvc2U6ICAgICAgICQoJyNuZXdzbGV0dGVyLWZvcm0tY2xvc2UtYnRuJyksXG4gICAgJGJ0bjogICAgICAgICAkKCcubmV3c2xldHRlci1mb3JtJykuZmluZCgnYnV0dG9uW3R5cGU9c3VibWl0XScpLFxuICAgICR3aWRnZXQ6ICAgICAgJCgnZm9ybVtuYW1lPW1jLWVtYmVkZGVkLXN1YnNjcmliZS1mb3JtXSwgLm5ld3NsZXR0ZXIgLndpZGdldC1lbWJlZC1mb3JtJyksXG4gICAgJG5hdmxpbms6ICAgICAkKCcudHJkLW5hdi1saW5rW2hyZWYqPVwiL25ld3NsZXR0ZXIvXCJdJyksXG4gICAgJGVtYmVkX2Nsb3NlOiAkKCcud2lkZ2V0LWVtYmVkLWNsb3NlJyksXG4gICAgJGZpeGVkV2lkZ2V0OiAkKCcubmV3c2xldHRlci53aWRnZXQtZW1iZWQud2lkZ2V0LWZpeGVkJyksXG4gICAgJHN1YnNjcmliZVN1Ym1pdDogZmFsc2VcbiAgfTtcblxuICBmbiA9IHtcbiAgICBpbml0ICgpIHtcbiAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5qUXVlcnkpe1xuICAgICAgICAgIGZuLmV2ZW50TGlzdGVuZXIoKTtcbiAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgfVxuICAgICAgfSwgNTAwKTtcbiAgICB9LFxuXG4gICAgcmVnaXN0ZXJFbHMgKCkge1xuICAgICAgZWxzLiRzbGlkZUZvcm0gPSAkKCcubmV3c2xldHRlci1zbGlkZScpO1xuICAgICAgZWxzLiRzbGlkZUZvcm1DbG9zZSA9ICQoJy5uZXdzbGV0dGVyLXNsaWRlLWNsb3NlLWJ0bicpO1xuICAgICAgZWxzLiRmb3JtICAgICAgICA9ICQoJy5uZXdzbGV0dGVyLWZvcm0nKTtcbiAgICAgIGVscy4kY2xvc2UgICAgICAgPSAkKCcjbmV3c2xldHRlci1mb3JtLWNsb3NlLWJ0bicpO1xuICAgICAgZWxzLiRidG4gICAgICAgICA9ICQoJy5uZXdzbGV0dGVyLWZvcm0nKS5maW5kKCdidXR0b25bdHlwZT1zdWJtaXRdJyk7XG4gICAgICBmbi5ldmVudExpc3RlbmVyKCk7XG4gICAgfSxcblxuICAgIGV2ZW50TGlzdGVuZXIgKCkge1xuICAgICAgZWxzLiRmb3JtLm9uKCAnc3VibWl0JywgaGFuZGxlcnMuc2F2ZSApO1xuICAgICAgZWxzLiR3aWRnZXQub24oICdzdWJtaXQnLCBoYW5kbGVycy5sb2FkU2xpZGVGb3JtICk7XG4gICAgICBlbHMuJG5hdmxpbmsub24oICdjbGljaycsIGhhbmRsZXJzLmxvYWRTbGlkZUZvcm0gKTtcbiAgICAgIGVscy4kZW1iZWRfY2xvc2Uub24oICdjbGljaycsIGhhbmRsZXJzLmZpeGVkV2lkZ2V0Q2xvc2UgKTtcbiAgICAgIGVscy4kc2xpZGVGb3JtQ2xvc2Uub24oICdjbGljaycsIGhhbmRsZXJzLmNsb3NlICk7XG4gICAgfSxcblxuICAgIHNob3dTbGlkZUZvcm0gKCBlbWFpbCApIHtcbiAgICAgIGxldCB3aWR0aCA9ICQoZG9jdW1lbnQpLndpZHRoKCk7XG4gICAgICAkKCAnaGVhZGVyLnRyZC1oZWFkZXIsIC5hZG1pbi1iYXInICkuYWRkQ2xhc3MoICd6ZG93bicgKTtcbiAgICAgIGlmKCB3aWR0aCA+IDc4MiApICQoJ2h0bWwsYm9keScpLmFkZENsYXNzKCdtb3ZlLW92ZXInKTtcbiAgICAgIGlmKCB3aWR0aCA8IDc4MiApICQoJ2h0bWwsYm9keScpLmFkZENsYXNzKCdvdmVyZmxvdy1vZmYnKTtcbiAgICAgIGVscy4kc2xpZGVGb3JtLmFkZENsYXNzKCAnc2hvdycgKTtcbiAgICAgIGVscy4kZm9ybS5maW5kKCAnaW5wdXRbdHlwZT1lbWFpbF0nICkudmFsKCBlbWFpbCApO1xuICAgICAgc2V0VGltZW91dCAoKCkgPT4ge1xuICAgICAgICBlbHMuJGZvcm0ub24oICdzdWJtaXQnLCBoYW5kbGVycy5zYXZlICk7XG4gICAgICAgIGVscy4kZm9ybS5vbiggJ3Jlc2V0JywgaGFuZGxlcnMuY2xvc2UgKTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH0sXG5cbiAgICB0cmFja0V2ZW50ICggZXZlbnQsIGNhdGVnb3J5LCBsYWJlbCApIHtcbiAgICAgIHZhciBkYXRhT2JqZWN0ID0ge1xuICAgICAgICAnZXZlbnQnOiBldmVudCxcbiAgICAgICAgJ2NhdGVnb3J5JzogY2F0ZWdvcnksXG4gICAgICAgICdsYWJlbCc6IGxhYmVsXG4gICAgICB9O1xuICAgICAgaWYodHlwZW9mIGRhdGFMYXllciAhPSAndW5kZWZpbmVkJyl7XG4gICAgICAgIGRhdGFMYXllci5wdXNoKGRhdGFPYmplY3QpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBoYW5kbGVycyA9IHtcbiAgICBzYXZlICggZSApIHtcbiAgICAgIGlmKCBlbHMuJHN1YnNjcmliZVN1Ym1pdCApIHJldHVybiBmYWxzZTtcbiAgICAgIGVscy4kc3Vic2NyaWJlU3VibWl0ID0gdHJ1ZTsgXG4gICAgICBlbHMuJGJ0biA9IGVscy4kZm9ybS5maW5kKCdidXR0b25bdHlwZT1zdWJtaXRdJyk7XG4gICAgICBsZXQgZGF0YSA9IHtcbiAgICAgICAgJ2FjdGlvbic6ICAgJ25ld3NsZXR0ZXJfc3Vic2NyaWJlJyxcbiAgICAgICAgJ3NlY3VyaXR5JzogdHJkX2FqYXguc2VjdXJpdHksXG4gICAgICAgICdkYXRhJzogICAgIHt9XG4gICAgICB9O1xuICAgICAgZWxzLiRmb3JtLmZpbmQoICdpbnB1dCcgKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IHZhbCAgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICBsZXQgbmFtZSA9ICQodGhpcykuYXR0cignbmFtZScpO1xuICAgICAgICBsZXQgdHlwZSA9ICQodGhpcykuYXR0cigndHlwZScpO1xuICAgICAgICBpZiggJ2NoZWNrYm94JyA9PT0gdHlwZSApIHtcbiAgICAgICAgICBpZiggbmFtZSAhPT0gJ3N1YnNjcmliZV9hbGwnKSB7XG4gICAgICAgICAgICBkYXRhLmRhdGFbIG5hbWUgXSA9ICQodGhpcykuaXMoXCI6Y2hlY2tlZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoICQudHJpbSggdmFsICkgIT09ICcnICkge1xuICAgICAgICAgIGRhdGEuZGF0YVsgbmFtZSBdID0gdmFsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGZuLnRyYWNrRXZlbnQoJ3N1YnNjcmliZScsICduZXdzbGV0dGVyX3NpZ251cF9mb3JtJywgZGF0YS5kYXRhWydwbGFjZSddKTtcbiAgICAgIGVscy4kYnRuLnRleHQoJ1N1YnNjcmliaW5nLi4uJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgIGpRdWVyeS5wb3N0KCB0cmRfYWpheC51cmwsIGRhdGEsIGZ1bmN0aW9uKCByZXNwb25zZSApIHtcbiAgICAgICAgZWxzLiRzdWJzY3JpYmVTdWJtaXQgPSBmYWxzZTtcbiAgICAgICAgZWxzLiRidG4udGV4dCgnU3Vic2NyaWJlJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgJCgnLm5ld3NsZXR0ZXItZm9ybS1idXR0b24nKS5oaWRlKCk7XG4gICAgICAgIGlmKCByZXNwb25zZS5zdWNjZXNzICl7XG4gICAgICAgICAgJCgnLm5ld3NsZXR0ZXItZm9ybS1zdWNjZXNzJykuc2hvdygpO1xuICAgICAgICAgIGZuLnRyYWNrRXZlbnQoJ3N1YnNjcmliZScsICduZXdzbGV0dGVyX3NpZ251cF9mb3JtJywgJ3N1Y2Nlc3MnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKCcubmV3c2xldHRlci1mb3JtLWVycm9yJykuc2hvdygpO1xuICAgICAgICAgIGZuLnRyYWNrRXZlbnQoJ3N1YnNjcmliZScsICduZXdzbGV0dGVyX3NpZ251cF9mb3JtJywgJ2ZhaWxlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgJCgnLm5ld3NsZXR0ZXItZm9ybS1zdWNjZXNzLC5uZXdzbGV0dGVyLWZvcm0tZXJyb3InKS5oaWRlKCk7XG4gICAgICAgICAgJCgnLm5ld3NsZXR0ZXItZm9ybS1idXR0b24nKS5zaG93KCk7XG4gICAgICAgIH0sIG8ubWVzc2FnZVRpbWVvdXQpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIGxvYWRTbGlkZUZvcm0gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGxldCBuYW1lID0gJyc7XG4gICAgICBsZXQgZW1haWwgPSAnJztcbiAgICAgIGxldCB3aWRnZXQgPSAkKHRoaXMpO1xuICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICdhY3Rpb24nOiAgICduZXdzbGV0dGVyX3NsaWRlX2Zvcm0nLFxuICAgICAgICAnc2VjdXJpdHknOiB0cmRfYWpheC5zZWN1cml0eVxuICAgICAgfTtcbiAgICAgIGlmKCB3aWRnZXQucHJvcCgndGFnTmFtZScpID09PSAnRk9STScgKXtcbiAgICAgICAgbmFtZSA9IHdpZGdldC5hdHRyKCduYW1lJyk7XG4gICAgICAgIGVtYWlsID0gd2lkZ2V0LmZpbmQoJ2lucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFtuYW1lPUVNQUlMXScpLnZhbCgpO1xuICAgICAgfSBlbHNlIGlmKCB3aWRnZXQucHJvcCgndGFnTmFtZScpID09PSAnQScgKSB7XG4gICAgICAgIG5hbWUgPSB3aWRnZXQuYXR0cignY2xhc3MnKTtcbiAgICAgIH0gXG4gICAgICBpZiggJCgnLm5ld3NsZXR0ZXItZm9ybS5wYWdlJykubGVuZ3RoICl7XG4gICAgICAgICQoJy5uZXdzbGV0dGVyLWZvcm0ucGFnZScpLmZpbmQoJ2lucHV0W3R5cGU9ZW1haWxdJykudmFsKCBlbWFpbCApLmZvY3VzKCk7XG4gICAgICAgICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IDAgfSwgNTAwKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYoIGVscy4kc2xpZGVGb3JtLmxlbmd0aCApe1xuICAgICAgICBmbi5zaG93U2xpZGVGb3JtKCBlbWFpbCApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgalF1ZXJ5LnBvc3QoIHRyZF9hamF4LnVybCwgZGF0YSwgZnVuY3Rpb24oIHJlc3BvbnNlICkge1xuICAgICAgICAgIGlmKCByZXNwb25zZSApe1xuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCggcmVzcG9uc2UgKTtcbiAgICAgICAgICAgIGZuLnNob3dTbGlkZUZvcm0oIGVtYWlsICk7XG4gICAgICAgICAgICBmbi5yZWdpc3RlckVscygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBmbi50cmFja0V2ZW50KCBlLnR5cGUsICduZXdzbGV0dGVyX3NpbnVwX29wZW4nLCBuYW1lICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIGNsb3NlICggZSApIHtcbiAgICAgIGhhbmRsZXJzLmZpeGVkV2lkZ2V0Q2xvc2UoIGUgKTtcbiAgICAgIGVscy4kc2xpZGVGb3JtLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ21vdmUtb3ZlcicpO1xuICAgICAgJCgnaHRtbCxib2R5JykucmVtb3ZlQ2xhc3MoJ292ZXJmbG93LW9mZicpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICQoJ2hlYWRlci50cmQtaGVhZGVyLCAuYWRtaW4tYmFyJykucmVtb3ZlQ2xhc3MoJ3pkb3duJyk7XG4gICAgICB9LCA1MDApO1xuICAgIH0sXG5cbiAgICBmaXhlZFdpZGdldENsb3NlICggZSApIHtcbiAgICAgICQoJy5uZXdzbGV0dGVyLndpZGdldC1lbWJlZC53aWRnZXQtZml4ZWQnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgIH0sXG5cbiAgICBzaG93Rml4ZWRXaWRnZXQgKCBlICkge1xuICAgICAgJCgnLm5ld3NsZXR0ZXIud2lkZ2V0LWVtYmVkLndpZGdldC1maXhlZCcpLmFkZENsYXNzKCdzaG93Jyk7XG4gICAgfVxuICAgIFxuICB9O1xuXG4gIGZuLmluaXQoKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuY29uc29sZS5pbmZvKCdUUkQgQ29yZSBMb2FkZWQnKTtcbmltcG9ydCBOYXZpZ2F0aW9uIGZyb20gJy4vX25hdmlnYXRpb24nO1xuaW1wb3J0IE5ld3NsZXR0ZXIgZnJvbSAnLi9fbmV3c2xldHRlcic7XG5OYXZpZ2F0aW9uKCk7XG5OZXdzbGV0dGVyKCk7Il19\n"]}