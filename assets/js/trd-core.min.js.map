{"version":3,"sources":["trd-core.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","value","options","fn","assign","messageTimeout","fixedEmbedTimer","init","piano_timer","setInterval","window","tp","piano","clearInterval","nav_timer","jQuery","trd_nav","push","$","pianoId","isUserValid","addClass","removeClass","on","event","preventDefault","logout","location","reload","show","screen","displayMode","loggedIn","this","hasClass","toggleClass","scroll","nav_scroll_left","animate","scrollLeft","lscroll","rscroll","get_total_nav_item_width","width","nav_regions_width","nav_item_width","each","2","els","handlers","$slideForm","$slideFormClose","$form","$close","$btn","find","$widget","$navlink","$embed_close","$fixedWidget","$subscribeSubmit","timer","eventListener","registerEls","save","loadSlideForm","fixedWidgetClose","close","showSlideForm","email","document","val","setTimeout","trackEvent","category","action","label","dataObject","trd.action","trd.category","trd.label","trd.value","dataLayer","data","security","trd_ajax","name","attr","is","trim","text","post","url","response","removeAttr","hide","success","widget","prop","focus","scrollTop","append","type","showFixedWidget","3","_navigation","_interopRequireDefault","_newsletter","__esModule","default","console","info","./_navigation","./_newsletter"],"mappings":"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","file":"trd-core.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _default(options) {\n  var defaults = {\n    messageTimeout: 5000,\n    // 5 seconds\n    fixedEmbedTimer: 3000 // 3 seconds\n\n  };\n  var els;\n  var fn;\n  var handlers;\n  var o = Object.assign(defaults, options);\n  fn = {\n    init: function init() {\n      var piano_timer = setInterval(function () {\n        if (_typeof(window.tp) === 'object') {\n          fn.piano();\n          clearInterval(piano_timer);\n        }\n      }, 500);\n      var nav_timer = setInterval(function () {\n        if (typeof window.jQuery === 'function') {\n          fn.trd_nav();\n          clearInterval(nav_timer);\n        }\n      }, 500);\n    },\n    piano: function piano() {\n      window.tp.push([\"init\", function () {\n        if ($('.trd-nav-account-login, .trd-nav-account-logout') != null) {\n          if (window.tp.pianoId.isUserValid()) {\n            $('.trd-header.trd-nav').addClass('trd-nav-loggedin');\n            $('.trd-nav-account-login').addClass('hide');\n            $('.trd-nav-account-logout').removeClass('hide');\n            $('.trd-nav-account-logout a[href*=\"/#logout\"]').on('click', function (event) {\n              event.preventDefault();\n              window.tp.pianoId.logout();\n              window.location.reload();\n            });\n          } else {\n            $('.trd-nav-account-logout').addClass('hide');\n            $('.trd-nav-account-login').removeClass('hide');\n            $('.trd-nav-account-login a[href*=\"/#login\"]').on('click', function (event) {\n              event.preventDefault();\n              window.tp.pianoId.show({\n                screen: 'login',\n                displayMode: 'modal',\n                loggedIn: function loggedIn() {\n                  window.location.reload();\n                }\n              });\n              return false;\n            });\n          }\n        }\n      }]);\n    },\n    trd_nav: function trd_nav() {\n      $('.trd-nav-menu-btn').on('click', function () {\n        if ($(this).hasClass('close')) {\n          $('.trd-nav-secondary').removeClass('show');\n          $('html,body').removeClass('overflow-off');\n        } else {\n          $('.trd-nav-secondary').addClass('show');\n          $('html,body').addClass('overflow-off');\n        }\n      });\n      $('.trd-nav-search-btn').on('click', function () {\n        $('.trd-nav-search').toggleClass('show');\n      });\n      $('.trd-nav-mid-left').on('click', function () {\n        var scroll = fn.nav_scroll_left();\n        $('.trd-nav-regions').animate({\n          scrollLeft: scroll - 100\n        }, 1000);\n      });\n      $('.trd-nav-mid-right').on('click', function () {\n        var scroll = fn.nav_scroll_left();\n        $('.trd-nav-regions').animate({\n          scrollLeft: scroll + 100\n        }, 1000);\n      });\n      $('.trd-nav-regions').on('scroll', function () {\n        fn.nav_scroll_left();\n      });\n    },\n    nav_scroll_left: function nav_scroll_left() {\n      var lscroll = $('.trd-nav-regions').scrollLeft();\n      var rscroll = fn.get_total_nav_item_width();\n      var width = window.nav_regions_width;\n\n      if (lscroll > 0) {\n        $('.trd-nav-mid').addClass('show-left');\n      } else {\n        $('.trd-nav-mid').removeClass('show-left');\n      }\n\n      if (rscroll <= width + lscroll) {\n        $('.trd-nav-mid').removeClass('show-right');\n      } else {\n        $('.trd-nav-mid').addClass('show-right');\n      }\n\n      return lscroll;\n    },\n    get_total_nav_item_width: function get_total_nav_item_width() {\n      if (!window.nav_item_width) {\n        window.nav_regions_width = $('.trd-nav-regions').width();\n        window.nav_item_width = 0;\n        $('.trd-nav-regions .trd-nav-item').each(function () {\n          window.nav_item_width += $(this).width();\n        });\n      }\n\n      return window.nav_item_width;\n    }\n  };\n  fn.init();\n}\n\n;\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = _default;\n\nfunction _default(options) {\n  var defaults = {\n    messageTimeout: 5000,\n    // 5 seconds\n    fixedEmbedTimer: 3000 // 3 seconds\n\n  };\n  var els;\n  var fn;\n  var handlers;\n  var o = Object.assign(defaults, options);\n  els = {\n    $slideForm: $('.newsletter-slide'),\n    $slideFormClose: $('.newsletter-slide-close-btn'),\n    $form: $('.newsletter-form'),\n    $close: $('#newsletter-form-close-btn'),\n    $btn: $('.newsletter-form').find('button[type=submit]'),\n    $widget: $('form[name=mc-embedded-subscribe-form], .newsletter .widget-embed-form'),\n    $navlink: $('.trd-nav-link[href*=\"/newsletter/\"]'),\n    $embed_close: $('.widget-embed-close'),\n    $fixedWidget: $('.newsletter.widget-embed.widget-fixed'),\n    $subscribeSubmit: false\n  };\n  fn = {\n    init: function init() {\n      var timer = setInterval(function () {\n        if (window.jQuery) {\n          fn.eventListener();\n          clearInterval(timer);\n        }\n      }, 500);\n    },\n    registerEls: function registerEls() {\n      els.$slideForm = $('.newsletter-slide');\n      els.$slideFormClose = $('.newsletter-slide-close-btn');\n      els.$form = $('.newsletter-form');\n      els.$close = $('#newsletter-form-close-btn');\n      els.$btn = $('.newsletter-form').find('button[type=submit]');\n      fn.eventListener();\n    },\n    eventListener: function eventListener() {\n      els.$form.on('submit', handlers.save);\n      els.$widget.on('submit', handlers.loadSlideForm);\n      els.$navlink.on('click', handlers.loadSlideForm);\n      els.$embed_close.on('click', handlers.fixedWidgetClose);\n      els.$slideFormClose.on('click', handlers.close);\n    },\n    showSlideForm: function showSlideForm(email) {\n      var width = $(document).width();\n      $('header.trd-header, .admin-bar').addClass('zdown');\n      if (width > 782) $('html,body').addClass('move-over');\n      if (width < 782) $('html,body').addClass('overflow-off');\n      els.$slideForm.addClass('show');\n      els.$form.find('input[type=email]').val(email);\n      setTimeout(function () {\n        els.$form.on('submit', handlers.save);\n        els.$form.on('reset', handlers.close);\n      }, 1000);\n    },\n    trackEvent: function trackEvent(category, action, label, value) {\n      var dataObject = {\n        'event': category,\n        'trd.action': action,\n        'trd.category': category,\n        'trd.label': label,\n        'trd.value': value\n      };\n\n      if (typeof dataLayer != 'undefined') {\n        dataLayer.push(dataObject);\n      }\n    }\n  };\n  handlers = {\n    save: function save(e) {\n      if (els.$subscribeSubmit) return false;\n      els.$subscribeSubmit = true;\n      els.$btn = els.$form.find('button[type=submit]');\n      var data = {\n        'action': 'newsletter_subscribe',\n        'security': trd_ajax.security,\n        'data': {}\n      };\n      els.$form.find('input').each(function () {\n        var val = $(this).val();\n        var name = $(this).attr('name');\n        var type = $(this).attr('type');\n\n        if ('checkbox' === type) {\n          if (name !== 'subscribe_all') {\n            data.data[name] = $(this).is(\":checked\");\n          }\n        } else if ($.trim(val) !== '') {\n          data.data[name] = val;\n        }\n      });\n      fn.trackEvent('newsletter_signup', 'subscribe', data.data['place'], 'submit');\n      els.$btn.text('Subscribing...').attr('disabled', 'disabled');\n      jQuery.post(trd_ajax.url, data, function (response) {\n        els.$subscribeSubmit = false;\n        els.$btn.text('Subscribe').removeAttr('disabled');\n        $('.newsletter-form-button').hide();\n\n        if (response.success) {\n          $('.newsletter-form-success').show();\n          fn.trackEvent('newsletter_signup', 'subscribe', data.data['place'], 'success');\n        } else {\n          $('.newsletter-form-error').show();\n          fn.trackEvent('newsletter_signup', 'subscribe', data.data['place'], 'failed');\n        }\n\n        setTimeout(function () {\n          $('.newsletter-form-success,.newsletter-form-error').hide();\n          $('.newsletter-form-button').show();\n        }, o.messageTimeout);\n      });\n      return false;\n    },\n    loadSlideForm: function loadSlideForm(e) {\n      e.preventDefault();\n      var name = '';\n      var email = '';\n      var widget = $(this);\n      var data = {\n        'action': 'newsletter_slide_form',\n        'security': trd_ajax.security\n      };\n\n      if (widget.prop('tagName') === 'FORM') {\n        name = widget.attr('name');\n        email = widget.find('input[type=email], input[name=EMAIL]').val();\n      } else if (widget.prop('tagName') === 'A') {\n        name = widget.attr('class');\n      }\n\n      if ($('.newsletter-form.page').length) {\n        $('.newsletter-form.page').find('input[type=email]').val(email).focus();\n        $('html,body').animate({\n          scrollTop: 0\n        }, 500);\n      } else if (els.$slideForm.length) {\n        fn.showSlideForm(email);\n      } else {\n        jQuery.post(trd_ajax.url, data, function (response) {\n          if (response) {\n            $('body').append(response);\n            fn.showSlideForm(email);\n            fn.registerEls();\n          }\n        });\n      }\n\n      fn.trackEvent('newsletter_signup', 'open', name, e.type);\n      return false;\n    },\n    close: function close(e) {\n      handlers.fixedWidgetClose(e);\n      els.$slideForm.removeClass('show');\n      $('body').removeClass('move-over');\n      $('html,body').removeClass('overflow-off');\n      setTimeout(function () {\n        $('header.trd-header, .admin-bar').removeClass('zdown');\n      }, 500);\n    },\n    fixedWidgetClose: function fixedWidgetClose(e) {\n      $('.newsletter.widget-embed.widget-fixed').removeClass('show');\n    },\n    showFixedWidget: function showFixedWidget(e) {\n      $('.newsletter.widget-embed.widget-fixed').addClass('show');\n    }\n  };\n  fn.init();\n}\n\n;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _navigation = _interopRequireDefault(require(\"./_navigation\"));\n\nvar _newsletter = _interopRequireDefault(require(\"./_newsletter\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nconsole.info('TRD Core Loaded');\n(0, _navigation[\"default\"])();\n(0, _newsletter[\"default\"])();\n\n},{\"./_navigation\":1,\"./_newsletter\":2}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvX25hdmlnYXRpb24uanMiLCJzcmMvanMvX25ld3NsZXR0ZXIuanMiLCJzcmMvanMvdHJkLWNvcmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7QUNBZSxrQkFBVyxPQUFYLEVBQW9CO0FBRWpDLE1BQU0sUUFBUSxHQUFHO0FBQ2YsSUFBQSxjQUFjLEVBQUcsSUFERjtBQUNRO0FBQ3ZCLElBQUEsZUFBZSxFQUFFLElBRkYsQ0FFUTs7QUFGUixHQUFqQjtBQUtBLE1BQUksR0FBSjtBQUNBLE1BQUksRUFBSjtBQUNBLE1BQUksUUFBSjtBQUNBLE1BQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFQLENBQWUsUUFBZixFQUF5QixPQUF6QixDQUFSO0FBRUEsRUFBQSxFQUFFLEdBQUc7QUFDSCxJQUFBLElBREcsa0JBQ0k7QUFDTCxVQUFJLFdBQVcsR0FBRyxXQUFXLENBQUMsWUFBTTtBQUNsQyxZQUFLLFFBQU8sTUFBTSxDQUFDLEVBQWQsTUFBcUIsUUFBMUIsRUFBb0M7QUFDbEMsVUFBQSxFQUFFLENBQUMsS0FBSDtBQUNBLFVBQUEsYUFBYSxDQUFFLFdBQUYsQ0FBYjtBQUNEO0FBQ0YsT0FMNEIsRUFLMUIsR0FMMEIsQ0FBN0I7QUFPQSxVQUFJLFNBQVMsR0FBRyxXQUFXLENBQUMsWUFBTTtBQUNoQyxZQUFLLE9BQU8sTUFBTSxDQUFDLE1BQWQsS0FBeUIsVUFBOUIsRUFBMEM7QUFDeEMsVUFBQSxFQUFFLENBQUMsT0FBSDtBQUNBLFVBQUEsYUFBYSxDQUFFLFNBQUYsQ0FBYjtBQUNEO0FBQ0YsT0FMMEIsRUFLeEIsR0FMd0IsQ0FBM0I7QUFNRCxLQWZFO0FBa0JILElBQUEsS0FsQkcsbUJBa0JLO0FBQ04sTUFBQSxNQUFNLENBQUMsRUFBUCxDQUFVLElBQVYsQ0FBZSxDQUFDLE1BQUQsRUFBUyxZQUFVO0FBQ2hDLFlBQUksQ0FBQyxDQUFDLGlE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QU8sQ0FBQyxJQUFSLENBQWEsaUJBQWI7QUFHQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCBvcHRpb25zICl7XG5cbiAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgbWVzc2FnZVRpbWVvdXQ6ICA1MDAwLCAvLyA1IHNlY29uZHNcbiAgICBmaXhlZEVtYmVkVGltZXI6IDMwMDAgIC8vIDMgc2Vjb25kc1xuICB9O1xuXG4gIGxldCBlbHM7XG4gIGxldCBmbjtcbiAgbGV0IGhhbmRsZXJzO1xuICBsZXQgbyA9IE9iamVjdC5hc3NpZ24oIGRlZmF1bHRzLCBvcHRpb25zICk7XG5cbiAgZm4gPSB7XG4gICAgaW5pdCgpIHtcbiAgICAgIGxldCBwaWFub190aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKCB0eXBlb2Ygd2luZG93LnRwID09PSAnb2JqZWN0JyApe1xuICAgICAgICAgIGZuLnBpYW5vKCk7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCggcGlhbm9fdGltZXIgKTtcbiAgICAgICAgfVxuICAgICAgfSwgNTAwKTtcbiAgICAgIFxuICAgICAgbGV0IG5hdl90aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKCB0eXBlb2Ygd2luZG93LmpRdWVyeSA9PT0gJ2Z1bmN0aW9uJyApe1xuICAgICAgICAgIGZuLnRyZF9uYXYoKTtcbiAgICAgICAgICBjbGVhckludGVydmFsKCBuYXZfdGltZXIgKTtcbiAgICAgICAgfVxuICAgICAgfSwgNTAwKTtcbiAgICB9LFxuXG4gICAgXG4gICAgcGlhbm8oKSB7XG4gICAgICB3aW5kb3cudHAucHVzaChbXCJpbml0XCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmKCAkKCcudHJkLW5hdi1hY2NvdW50LWxvZ2luLCAudHJkLW5hdi1hY2NvdW50LWxvZ291dCcpICE9IG51bGwgKSB7XG4gICAgICAgICAgaWYoIHdpbmRvdy50cC5waWFub0lkLmlzVXNlclZhbGlkKCkgKSB7XG4gICAgICAgICAgICAkKCcudHJkLWhlYWRlci50cmQtbmF2JykuYWRkQ2xhc3MoJ3RyZC1uYXYtbG9nZ2VkaW4nKTtcbiAgICAgICAgICAgICQoJy50cmQtbmF2LWFjY291bnQtbG9naW4nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgJCgnLnRyZC1uYXYtYWNjb3VudC1sb2dvdXQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgJCgnLnRyZC1uYXYtYWNjb3VudC1sb2dvdXQgYVtocmVmKj1cIi8jbG9nb3V0XCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oIGV2ZW50ICl7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHdpbmRvdy50cC5waWFub0lkLmxvZ291dCgpO1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLnRyZC1uYXYtYWNjb3VudC1sb2dvdXQnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgJCgnLnRyZC1uYXYtYWNjb3VudC1sb2dpbicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAkKCcudHJkLW5hdi1hY2NvdW50LWxvZ2luIGFbaHJlZio9XCIvI2xvZ2luXCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oIGV2ZW50ICl7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHdpbmRvdy50cC5waWFub0lkLnNob3coe1xuICAgICAgICAgICAgICAgIHNjcmVlbjogICAgICAnbG9naW4nLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlNb2RlOiAnbW9kYWwnLFxuICAgICAgICAgICAgICAgIGxvZ2dlZEluOiAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XSk7XG4gICAgfSxcblxuICAgIHRyZF9uYXYoKSB7XG4gICAgICAkKCcudHJkLW5hdi1tZW51LWJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZigkKHRoaXMpLmhhc0NsYXNzKCdjbG9zZScpKXtcbiAgICAgICAgICAkKCcudHJkLW5hdi1zZWNvbmRhcnknKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgICAgICAgICQoJ2h0bWwsYm9keScpLnJlbW92ZUNsYXNzKCdvdmVyZmxvdy1vZmYnKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgJCgnLnRyZC1uYXYtc2Vjb25kYXJ5JykuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICAgICAkKCdodG1sLGJvZHknKS5hZGRDbGFzcygnb3ZlcmZsb3ctb2ZmJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgJCgnLnRyZC1uYXYtc2VhcmNoLWJ0bicpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgJCgnLnRyZC1uYXYtc2VhcmNoJykudG9nZ2xlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgIH0pO1xuICAgICAgJCgnLnRyZC1uYXYtbWlkLWxlZnQnKS5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGxldCBzY3JvbGwgPSBmbi5uYXZfc2Nyb2xsX2xlZnQoKTtcbiAgICAgICAgJCgnLnRyZC1uYXYtcmVnaW9ucycpLmFuaW1hdGUoe1xuICAgICAgICAgIHNjcm9sbExlZnQ6IHNjcm9sbCAtIDEwMFxuICAgICAgICB9LCAxMDAwKTtcbiAgICAgIH0pO1xuICAgICAgJCgnLnRyZC1uYXYtbWlkLXJpZ2h0Jykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBsZXQgc2Nyb2xsID0gZm4ubmF2X3Njcm9sbF9sZWZ0KCk7XG4gICAgICAgICQoJy50cmQtbmF2LXJlZ2lvbnMnKS5hbmltYXRlKHtcbiAgICAgICAgICBzY3JvbGxMZWZ0OiBzY3JvbGwgKyAxMDBcbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9KTtcbiAgICAgICQoJy50cmQtbmF2LXJlZ2lvbnMnKS5vbignc2Nyb2xsJywgKCkgPT4ge1xuICAgICAgICBmbi5uYXZfc2Nyb2xsX2xlZnQoKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBuYXZfc2Nyb2xsX2xlZnQoKXtcbiAgICAgIGxldCBsc2Nyb2xsID0gJCgnLnRyZC1uYXYtcmVnaW9ucycpLnNjcm9sbExlZnQoKTtcbiAgICAgIGxldCByc2Nyb2xsID0gZm4uZ2V0X3RvdGFsX25hdl9pdGVtX3dpZHRoKCk7XG4gICAgICBsZXQgd2lkdGggICA9IHdpbmRvdy5uYXZfcmVnaW9uc193aWR0aDtcbiAgICAgIGlmKCBsc2Nyb2xsID4gMCl7XG4gICAgICAgICQoJy50cmQtbmF2LW1pZCcpLmFkZENsYXNzKCdzaG93LWxlZnQnKTtcbiAgICAgIH1lbHNle1xuICAgICAgICAkKCcudHJkLW5hdi1taWQnKS5yZW1vdmVDbGFzcygnc2hvdy1sZWZ0Jyk7XG4gICAgICB9XG4gICAgICBpZiggcnNjcm9sbCA8PSAod2lkdGggKyBsc2Nyb2xsKSApe1xuICAgICAgICAkKCcudHJkLW5hdi1taWQnKS5yZW1vdmVDbGFzcygnc2hvdy1yaWdodCcpO1xuICAgICAgfWVsc2V7XG4gICAgICAgICQoJy50cmQtbmF2LW1pZCcpLmFkZENsYXNzKCdzaG93LXJpZ2h0Jyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbHNjcm9sbDtcbiAgICB9LFxuXG4gICAgZ2V0X3RvdGFsX25hdl9pdGVtX3dpZHRoKCl7XG4gICAgICBpZighd2luZG93Lm5hdl9pdGVtX3dpZHRoKXtcbiAgICAgICAgd2luZG93Lm5hdl9yZWdpb25zX3dpZHRoID0gJCgnLnRyZC1uYXYtcmVnaW9ucycpLndpZHRoKCk7XG4gICAgICAgIHdpbmRvdy5uYXZfaXRlbV93aWR0aCA9IDA7XG4gICAgICAgICQoJy50cmQtbmF2LXJlZ2lvbnMgLnRyZC1uYXYtaXRlbScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgd2luZG93Lm5hdl9pdGVtX3dpZHRoICs9ICQodGhpcykud2lkdGgoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2luZG93Lm5hdl9pdGVtX3dpZHRoO1xuICAgIH1cbiAgfTtcblxuICBmbi5pbml0KCk7XG59OyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICggb3B0aW9ucyApe1xuXG4gIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgIG1lc3NhZ2VUaW1lb3V0OiAgNTAwMCwgLy8gNSBzZWNvbmRzXG4gICAgZml4ZWRFbWJlZFRpbWVyOiAzMDAwICAvLyAzIHNlY29uZHNcbiAgfTtcblxuICBsZXQgZWxzO1xuICBsZXQgZm47XG4gIGxldCBoYW5kbGVycztcbiAgbGV0IG8gPSBPYmplY3QuYXNzaWduKCBkZWZhdWx0cywgb3B0aW9ucyApO1xuXG4gIGVscyA9IHtcbiAgICAkc2xpZGVGb3JtOiAkKCcubmV3c2xldHRlci1zbGlkZScpLFxuICAgICRzbGlkZUZvcm1DbG9zZTogJCgnLm5ld3NsZXR0ZXItc2xpZGUtY2xvc2UtYnRuJyksXG4gICAgJGZvcm06ICAgICAgICAkKCcubmV3c2xldHRlci1mb3JtJyksXG4gICAgJGNsb3NlOiAgICAgICAkKCcjbmV3c2xldHRlci1mb3JtLWNsb3NlLWJ0bicpLFxuICAgICRidG46ICAgICAgICAgJCgnLm5ld3NsZXR0ZXItZm9ybScpLmZpbmQoJ2J1dHRvblt0eXBlPXN1Ym1pdF0nKSxcbiAgICAkd2lkZ2V0OiAgICAgICQoJ2Zvcm1bbmFtZT1tYy1lbWJlZGRlZC1zdWJzY3JpYmUtZm9ybV0sIC5uZXdzbGV0dGVyIC53aWRnZXQtZW1iZWQtZm9ybScpLFxuICAgICRuYXZsaW5rOiAgICAgJCgnLnRyZC1uYXYtbGlua1tocmVmKj1cIi9uZXdzbGV0dGVyL1wiXScpLFxuICAgICRlbWJlZF9jbG9zZTogJCgnLndpZGdldC1lbWJlZC1jbG9zZScpLFxuICAgICRmaXhlZFdpZGdldDogJCgnLm5ld3NsZXR0ZXIud2lkZ2V0LWVtYmVkLndpZGdldC1maXhlZCcpLFxuICAgICRzdWJzY3JpYmVTdWJtaXQ6IGZhbHNlXG4gIH07XG5cbiAgZm4gPSB7XG4gICAgaW5pdCAoKSB7XG4gICAgICBsZXQgdGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmICh3aW5kb3cualF1ZXJ5KXtcbiAgICAgICAgICBmbi5ldmVudExpc3RlbmVyKCk7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICAgIH1cbiAgICAgIH0sIDUwMCk7XG4gICAgfSxcblxuICAgIHJlZ2lzdGVyRWxzICgpIHtcbiAgICAgIGVscy4kc2xpZGVGb3JtID0gJCgnLm5ld3NsZXR0ZXItc2xpZGUnKTtcbiAgICAgIGVscy4kc2xpZGVGb3JtQ2xvc2UgPSAkKCcubmV3c2xldHRlci1zbGlkZS1jbG9zZS1idG4nKTtcbiAgICAgIGVscy4kZm9ybSAgICAgICAgPSAkKCcubmV3c2xldHRlci1mb3JtJyk7XG4gICAgICBlbHMuJGNsb3NlICAgICAgID0gJCgnI25ld3NsZXR0ZXItZm9ybS1jbG9zZS1idG4nKTtcbiAgICAgIGVscy4kYnRuICAgICAgICAgPSAkKCcubmV3c2xldHRlci1mb3JtJykuZmluZCgnYnV0dG9uW3R5cGU9c3VibWl0XScpO1xuICAgICAgZm4uZXZlbnRMaXN0ZW5lcigpO1xuICAgIH0sXG5cbiAgICBldmVudExpc3RlbmVyICgpIHtcbiAgICAgIGVscy4kZm9ybS5vbiggJ3N1Ym1pdCcsIGhhbmRsZXJzLnNhdmUgKTtcbiAgICAgIGVscy4kd2lkZ2V0Lm9uKCAnc3VibWl0JywgaGFuZGxlcnMubG9hZFNsaWRlRm9ybSApO1xuICAgICAgZWxzLiRuYXZsaW5rLm9uKCAnY2xpY2snLCBoYW5kbGVycy5sb2FkU2xpZGVGb3JtICk7XG4gICAgICBlbHMuJGVtYmVkX2Nsb3NlLm9uKCAnY2xpY2snLCBoYW5kbGVycy5maXhlZFdpZGdldENsb3NlICk7XG4gICAgICBlbHMuJHNsaWRlRm9ybUNsb3NlLm9uKCAnY2xpY2snLCBoYW5kbGVycy5jbG9zZSApO1xuICAgIH0sXG5cbiAgICBzaG93U2xpZGVGb3JtICggZW1haWwgKSB7XG4gICAgICBsZXQgd2lkdGggPSAkKGRvY3VtZW50KS53aWR0aCgpO1xuICAgICAgJCggJ2hlYWRlci50cmQtaGVhZGVyLCAuYWRtaW4tYmFyJyApLmFkZENsYXNzKCAnemRvd24nICk7XG4gICAgICBpZiggd2lkdGggPiA3ODIgKSAkKCdodG1sLGJvZHknKS5hZGRDbGFzcygnbW92ZS1vdmVyJyk7XG4gICAgICBpZiggd2lkdGggPCA3ODIgKSAkKCdodG1sLGJvZHknKS5hZGRDbGFzcygnb3ZlcmZsb3ctb2ZmJyk7XG4gICAgICBlbHMuJHNsaWRlRm9ybS5hZGRDbGFzcyggJ3Nob3cnICk7XG4gICAgICBlbHMuJGZvcm0uZmluZCggJ2lucHV0W3R5cGU9ZW1haWxdJyApLnZhbCggZW1haWwgKTtcbiAgICAgIHNldFRpbWVvdXQgKCgpID0+IHtcbiAgICAgICAgZWxzLiRmb3JtLm9uKCAnc3VibWl0JywgaGFuZGxlcnMuc2F2ZSApO1xuICAgICAgICBlbHMuJGZvcm0ub24oICdyZXNldCcsIGhhbmRsZXJzLmNsb3NlICk7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9LFxuXG4gICAgdHJhY2tFdmVudCAoIGNhdGVnb3J5LCBhY3Rpb24sIGxhYmVsLCB2YWx1ZSApIHtcbiAgICAgIHZhciBkYXRhT2JqZWN0ID0ge1xuICAgICAgICAnZXZlbnQnOiBjYXRlZ29yeSxcbiAgICAgICAgJ3RyZC5hY3Rpb24nOiBhY3Rpb24sXG4gICAgICAgICd0cmQuY2F0ZWdvcnknOiBjYXRlZ29yeSxcbiAgICAgICAgJ3RyZC5sYWJlbCc6IGxhYmVsLFxuICAgICAgICAndHJkLnZhbHVlJzogdmFsdWVcbiAgICAgIH07XG4gICAgICBpZih0eXBlb2YgZGF0YUxheWVyICE9ICd1bmRlZmluZWQnKXtcbiAgICAgICAgZGF0YUxheWVyLnB1c2goZGF0YU9iamVjdCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGhhbmRsZXJzID0ge1xuICAgIHNhdmUgKCBlICkge1xuICAgICAgaWYoIGVscy4kc3Vic2NyaWJlU3VibWl0ICkgcmV0dXJuIGZhbHNlO1xuICAgICAgZWxzLiRzdWJzY3JpYmVTdWJtaXQgPSB0cnVlOyBcbiAgICAgIGVscy4kYnRuID0gZWxzLiRmb3JtLmZpbmQoJ2J1dHRvblt0eXBlPXN1Ym1pdF0nKTtcbiAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAnYWN0aW9uJzogICAnbmV3c2xldHRlcl9zdWJzY3JpYmUnLFxuICAgICAgICAnc2VjdXJpdHknOiB0cmRfYWpheC5zZWN1cml0eSxcbiAgICAgICAgJ2RhdGEnOiAgICAge31cbiAgICAgIH07XG4gICAgICBlbHMuJGZvcm0uZmluZCggJ2lucHV0JyApLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICBsZXQgdmFsICA9ICQodGhpcykudmFsKCk7XG4gICAgICAgIGxldCBuYW1lID0gJCh0aGlzKS5hdHRyKCduYW1lJyk7XG4gICAgICAgIGxldCB0eXBlID0gJCh0aGlzKS5hdHRyKCd0eXBlJyk7XG4gICAgICAgIGlmKCAnY2hlY2tib3gnID09PSB0eXBlICkge1xuICAgICAgICAgIGlmKCBuYW1lICE9PSAnc3Vic2NyaWJlX2FsbCcpIHtcbiAgICAgICAgICAgIGRhdGEuZGF0YVsgbmFtZSBdID0gJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICggJC50cmltKCB2YWwgKSAhPT0gJycgKSB7XG4gICAgICAgICAgZGF0YS5kYXRhWyBuYW1lIF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgZm4udHJhY2tFdmVudCgnbmV3c2xldHRlcl9zaWdudXAnLCAnc3Vic2NyaWJlJywgZGF0YS5kYXRhWydwbGFjZSddLCAnc3VibWl0Jyk7XG4gICAgICBlbHMuJGJ0bi50ZXh0KCdTdWJzY3JpYmluZy4uLicpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICBqUXVlcnkucG9zdCggdHJkX2FqYXgudXJsLCBkYXRhLCBmdW5jdGlvbiggcmVzcG9uc2UgKSB7XG4gICAgICAgIGVscy4kc3Vic2NyaWJlU3VibWl0ID0gZmFsc2U7XG4gICAgICAgIGVscy4kYnRuLnRleHQoJ1N1YnNjcmliZScpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG4gICAgICAgICQoJy5uZXdzbGV0dGVyLWZvcm0tYnV0dG9uJykuaGlkZSgpO1xuICAgICAgICBpZiggcmVzcG9uc2Uuc3VjY2VzcyApe1xuICAgICAgICAgICQoJy5uZXdzbGV0dGVyLWZvcm0tc3VjY2VzcycpLnNob3coKTtcbiAgICAgICAgICBmbi50cmFja0V2ZW50KCduZXdzbGV0dGVyX3NpZ251cCcsICdzdWJzY3JpYmUnLCBkYXRhLmRhdGFbJ3BsYWNlJ10sICdzdWNjZXNzJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCgnLm5ld3NsZXR0ZXItZm9ybS1lcnJvcicpLnNob3coKTtcbiAgICAgICAgICBmbi50cmFja0V2ZW50KCduZXdzbGV0dGVyX3NpZ251cCcsICdzdWJzY3JpYmUnLCBkYXRhLmRhdGFbJ3BsYWNlJ10sICdmYWlsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICQoJy5uZXdzbGV0dGVyLWZvcm0tc3VjY2VzcywubmV3c2xldHRlci1mb3JtLWVycm9yJykuaGlkZSgpO1xuICAgICAgICAgICQoJy5uZXdzbGV0dGVyLWZvcm0tYnV0dG9uJykuc2hvdygpO1xuICAgICAgICB9LCBvLm1lc3NhZ2VUaW1lb3V0KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICBsb2FkU2xpZGVGb3JtIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBsZXQgbmFtZSA9ICcnO1xuICAgICAgbGV0IGVtYWlsID0gJyc7XG4gICAgICBsZXQgd2lkZ2V0ID0gJCh0aGlzKTtcbiAgICAgIGxldCBkYXRhID0ge1xuICAgICAgICAnYWN0aW9uJzogICAnbmV3c2xldHRlcl9zbGlkZV9mb3JtJyxcbiAgICAgICAgJ3NlY3VyaXR5JzogdHJkX2FqYXguc2VjdXJpdHlcbiAgICAgIH07XG4gICAgICBpZiggd2lkZ2V0LnByb3AoJ3RhZ05hbWUnKSA9PT0gJ0ZPUk0nICl7XG4gICAgICAgIG5hbWUgPSB3aWRnZXQuYXR0cignbmFtZScpO1xuICAgICAgICBlbWFpbCA9IHdpZGdldC5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXSwgaW5wdXRbbmFtZT1FTUFJTF0nKS52YWwoKTtcbiAgICAgIH0gZWxzZSBpZiggd2lkZ2V0LnByb3AoJ3RhZ05hbWUnKSA9PT0gJ0EnICkge1xuICAgICAgICBuYW1lID0gd2lkZ2V0LmF0dHIoJ2NsYXNzJyk7XG4gICAgICB9IFxuICAgICAgaWYoICQoJy5uZXdzbGV0dGVyLWZvcm0ucGFnZScpLmxlbmd0aCApe1xuICAgICAgICAkKCcubmV3c2xldHRlci1mb3JtLnBhZ2UnKS5maW5kKCdpbnB1dFt0eXBlPWVtYWlsXScpLnZhbCggZW1haWwgKS5mb2N1cygpO1xuICAgICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAwIH0sIDUwMCk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmKCBlbHMuJHNsaWRlRm9ybS5sZW5ndGggKXtcbiAgICAgICAgZm4uc2hvd1NsaWRlRm9ybSggZW1haWwgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGpRdWVyeS5wb3N0KCB0cmRfYWpheC51cmwsIGRhdGEsIGZ1bmN0aW9uKCByZXNwb25zZSApIHtcbiAgICAgICAgICBpZiggcmVzcG9uc2UgKXtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoIHJlc3BvbnNlICk7XG4gICAgICAgICAgICBmbi5zaG93U2xpZGVGb3JtKCBlbWFpbCApO1xuICAgICAgICAgICAgZm4ucmVnaXN0ZXJFbHMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZm4udHJhY2tFdmVudCggJ25ld3NsZXR0ZXJfc2lnbnVwJywgJ29wZW4nLCBuYW1lLCBlLnR5cGUgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgY2xvc2UgKCBlICkge1xuICAgICAgaGFuZGxlcnMuZml4ZWRXaWRnZXRDbG9zZSggZSApO1xuICAgICAgZWxzLiRzbGlkZUZvcm0ucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnbW92ZS1vdmVyJyk7XG4gICAgICAkKCdodG1sLGJvZHknKS5yZW1vdmVDbGFzcygnb3ZlcmZsb3ctb2ZmJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJCgnaGVhZGVyLnRyZC1oZWFkZXIsIC5hZG1pbi1iYXInKS5yZW1vdmVDbGFzcygnemRvd24nKTtcbiAgICAgIH0sIDUwMCk7XG4gICAgfSxcblxuICAgIGZpeGVkV2lkZ2V0Q2xvc2UgKCBlICkge1xuICAgICAgJCgnLm5ld3NsZXR0ZXIud2lkZ2V0LWVtYmVkLndpZGdldC1maXhlZCcpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICAgfSxcblxuICAgIHNob3dGaXhlZFdpZGdldCAoIGUgKSB7XG4gICAgICAkKCcubmV3c2xldHRlci53aWRnZXQtZW1iZWQud2lkZ2V0LWZpeGVkJykuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgICB9XG4gICAgXG4gIH07XG5cbiAgZm4uaW5pdCgpO1xufTsiLCIndXNlIHN0cmljdCc7XG5jb25zb2xlLmluZm8oJ1RSRCBDb3JlIExvYWRlZCcpO1xuaW1wb3J0IE5hdmlnYXRpb24gZnJvbSAnLi9fbmF2aWdhdGlvbic7XG5pbXBvcnQgTmV3c2xldHRlciBmcm9tICcuL19uZXdzbGV0dGVyJztcbk5hdmlnYXRpb24oKTtcbk5ld3NsZXR0ZXIoKTsiXX0=\n"]}